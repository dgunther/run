#! /usr/bin/env nix-shell
#! nix-shell -i bash -p dante
# shellcheck shell=bash
#
## Start a SOCKS proxy
# port: Port to listen on [8889]

PORT=$1

danted -f <(cat <<EOF
logoutput: stderr
internal: 0.0.0.0 port = $PORT
external: 0.0.0.0
clientmethod: none
socksmethod: none
user.privileged: root
user.unprivileged: nobody
client pass {
        from: 0.0.0.0/0 to: 0.0.0.0/0
}
socks pass {
        from: 0.0.0.0/0 to: 0.0.0.0/0
}
EOF
)
